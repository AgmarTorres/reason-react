<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Callback Handlers · ReasonReact</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Cette section décrit comment le code `&lt;div onClick={this.handleClick} /&gt;` React se traduit en ReasonReact."/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Callback Handlers · ReasonReact"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reasonml.github.io/reason-react/reason-react/index.html"/><meta property="og:description" content="Cette section décrit comment le code `&lt;div onClick={this.handleClick} /&gt;` React se traduit en ReasonReact."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/reason-react/img/reason-react-favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://reasonml.github.io/reason-react/reason-react/blog/atom.xml" title="ReasonReact Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://reasonml.github.io/reason-react/reason-react/blog/feed.xml" title="ReasonReact Blog RSS Feed"/><script type="text/javascript" src="/reason-react/js/pjax-api.min.js"></script><link rel="stylesheet" href="/reason-react/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/reason-react/fr"><img class="logo" src="/reason-react/img/reason-react-white.svg" alt="ReasonReact"/><h2 class="headerTitleWithLogo">ReasonReact</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/reason-react/docs/fr/installation" target="_self">Docs</a></li><li class=""><a href="/reason-react/docs/fr/playground" target="_self">Try</a></li><li class=""><a href="/reason-react/docs/fr/simple" target="_self">Examples</a></li><li class=""><a href="/reason-react/docs/fr/community" target="_self">Community</a></li><li class=""><a href="/reason-react/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/reason-react/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/reason-react/docs/ja/callback-handlers">日本語</a></li><li><a href="/reason-react/docs/en/callback-handlers">English</a></li><li><a href="/reason-react/docs/es-ES/callback-handlers">Español</a></li><li><a href="/reason-react/docs/ko/callback-handlers">한국어</a></li><li><a href="/reason-react/docs/pt-BR/callback-handlers">Português (Brasil)</a></li><li><a href="/reason-react/docs/ru/callback-handlers">Русский</a></li><li><a href="/reason-react/docs/zh-CN/callback-handlers">中文</a></li><li><a href="/reason-react/docs/zh-Hant/callback-handlers">繁體中文</a></li><li><a href="https://crowdin.com/project/reason-react" target="_blank" rel="noreferrer noopener">Aider à traduire</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/reasonml/reason-react" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Core</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/what-and-why">What &amp; Why</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/intro-example">Intro Example</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Core</h3><ul><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/creation-props-self">Creation, Props &amp; Self</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/jsx">JSX</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/render">Render</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/reason-react/docs/fr/callback-handlers">Callback Handlers</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/state-actions-reducer">State, Actions &amp; Reducer</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/lifecycles">Lifecycles</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/instance-variables">Instance Variables</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/react-ref">React Ref</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/interop">Talk to Existing ReactJS Code</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/event">Event</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/style">Style</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/clone-element">cloneElement</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/children">Children</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/dom">Working with DOM</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/subscriptions-helper">Subscriptions Helper</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/router">Router</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">ReactJS Idioms Equivalents</h3><ul><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/invalid-prop-name">Invalid Prop Name</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/props-spread">Props Spread</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/component-as-prop">Component as Prop</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/ternary-shortcut">Ternary Shortcut</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/context-mixins">Context &amp; Mixins?</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/custom-class-component-property">Custom Class/Component Property</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">FAQ</h3><ul><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/im-having-a-type-error">I&#x27;m Having a Type Error</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/record-field-send-handle-not-found">Record Field send/handle Not Found</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/send-handle-callbacks-having-incompatible-types">send/handle callbacks having Incompatible Types</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/i-really-need-feature-x-from-reactjs">I Really Need Feature X From ReactJS</a></li><li class="navListItem"><a class="navItem" href="/reason-react/docs/fr/element-type-is-invalid">Element Type is Invalid Runtime Error</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/reason-react/fr" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Callback Handlers</h1></header><article><div><span><p>Cette section décrit comment le code <code>&lt;div onClick={this.handleClick} /&gt;</code> React se traduit en ReasonReact.</p>
<h2><a class="anchor" aria-hidden="true" id="callback-sans-mise-a-jour-d-etat"></a><a href="#callback-sans-mise-a-jour-d-etat" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Callback sans mise à jour d'état</h2>
<p>Deux scénarios.</p>
<h3><a class="anchor" aria-hidden="true" id="sans-utiliser-self"></a><a href="#sans-utiliser-self" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sans utiliser <code>self</code></h3>
<p><em>Reminder: <code>self</code> is ReasonReact's <code>this</code>. It's a record that contains things like <code>state</code>, <code>send</code> and others.</em></p>
<p>Si vous ne faites que propager une propriété callback vers votre enfant, vous feriez exactement la même chose que vous auriez fait en ReactJS :</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> component = <span class="hljs-comment">/* ... */</span>;

<span class="hljs-keyword">let</span> make = (~name, ~onClick, _children) =&gt; {
  <span class="hljs-operator">...</span>component,
  render: (self) =&gt; &lt;button onClick=onClick /&gt;
};
</code></pre>
<p>No surprise here. Since Reason's JSX has <a href="https://reasonml.github.io/docs/en/jsx.html">punning syntax</a>, that <code>button</code> will format into <code>&lt;button onClick /&gt;</code>.</p>
<p>De même, pour pré-traiter une valeur avant de la retourner au propriétaire du composant :</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> component = <span class="hljs-comment">/* ... */</span>;

<span class="hljs-keyword">let</span> make = (~name, ~onClick, _children) =&gt; {
  <span class="hljs-keyword">let</span> click = (event) =&gt; onClick(name); <span class="hljs-comment">/* pass the name string up to the owner */</span>
  {
    <span class="hljs-operator">...</span>component,
    render: (self) =&gt; &lt;button onClick=click /&gt;
  }
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utiliser-self"></a><a href="#utiliser-self" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utiliser <code>self</code></h3>
<p>To access <code>state</code>, <code>send</code> and the other items in <code>self</code> from a callback, you <strong>need</strong> to wrap the callback in an extra layer called <code>self.handle</code>:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> component = <span class="hljs-comment">/* ... */</span>;

<span class="hljs-keyword">let</span> make = (~name, ~onClick, _children) =&gt; {
  <span class="hljs-keyword">let</span> click = (event, self) =&gt; {
    onClick(event);
    <span class="hljs-module-identifier">Js</span>.log(self.state);
  };
  {
    <span class="hljs-operator">...</span>component,
    initialState: <span class="hljs-comment">/* ... */</span>,
    render: (self) =&gt; &lt;button onClick={self.handle(click)} /&gt;
  }
};
</code></pre>
<p><strong>Notez</strong> comment le callback <code>click</code> prend maintenant l'argument supplémentaire <code>self</code>. Formellement, <code>self.handle</code> attend un callback qui</p>
<ul>
<li>accepte le contenu <strong>simple</strong> que vous passeriez normalement à, par exemple, <code>handleClick</code></li>
<li>plus l’argument <code>self</code>,</li>
<li>ne retourne rien (càd <code>()</code>, càd <code>unit</code>).</li>
</ul>
<p><strong>Note 2</strong> : parfois, vous pourriez transmettre <code>handle</code> à des fonctions utilitaires. Passer le <code>self</code> complet à la place et <strong>annotez le</strong>. Cela évite un comportement complexe pour <code>self</code> de type record. See <a href="/reason-react/docs/fr/record-field-send-handle-not-found">Record Field <code>send</code>/<code>handle</code> Not Found</a>.</p>
<h4><a class="anchor" aria-hidden="true" id="explication"></a><a href="#explication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Explication</h4>
<p>En réalité, <code>self.handle</code> est juste une fonction standard acceptant deux paramètres, le premier étant le callback en question, et le second étant le contenu qui est censé être passé au callback.</p>
<p>Clair ? En utilisant la capacité naturelle de &quot;currying&quot; de Reason au niveau langage, nous vous demandons seulement de passez le premier argument. Cela retourne une nouvelle fonction qui attend le second argument et exécute le corps de la fonction. Le deuxième argument étant passé par l’appelant, c'est à dire le composant dont vous êtes en train de faire le rendu !</p>
<h4><a class="anchor" aria-hidden="true" id="callback-recevant-plusieurs-arguments"></a><a href="#callback-recevant-plusieurs-arguments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Callback recevant plusieurs arguments</h4>
<p>Parfois, le composant que vous appelez provient de JavaScript (grâce à <a href="/reason-react/docs/fr/interop">l'interopérabilité ReasonReact &lt;-&gt; ReactJS</a>), et sa propriété callback s'attend que vous passiez un callback qui reçoit plus d'un paramètre. En ReactJS, cela ressemble à :</p>
<pre><code class="hljs css language-javascript">handleSubmit: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">username, password, event</span>) </span>{
  <span class="hljs-keyword">this</span>.setState(...)
}
...
&lt;MyForm onUserClickedSubmit={<span class="hljs-keyword">this</span>.handleSubmit} /&gt;
</code></pre>
<p>Vous ne pouvez pas écrire un tel <code>handleSubmit</code> en ReasonReact, simplement car <code>handle</code> s'attend à être décoré par une fonction qui ne prend qu'<strong>un</strong> paramètre. Voici comment contourner ce problème :</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> handleSubmitEscapeHatch = (username, password, event) =&gt;
  self.handle(
    (tupleOfThreeItems, self) =&gt; doSomething(tupleOfThreeItems, self),
    (username, password, event),
  );
<span class="hljs-operator">...</span>
&lt;<span class="hljs-module-identifier">MyForm</span> onUserClickedSubmit=(handleSubmitEscapeHatch) /&gt;
</code></pre>
<p>Foncièrement, vous écrivez une fonction qui :</p>
<ul>
<li>accepte les nombreux paramètres de la propriété callback du composant JS,</li>
<li>les regroupe dans un tuple et appelle <code>self.handle</code>,</li>
<li>transmet à <code>handle</code> la fonction standard qui n'attend qu'un seul paramètre,</li>
<li>finish calling <code>self.handle</code> by passing the tuple directly yourself.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="callback-avec-mise-a-jour-d-etat"></a><a href="#callback-avec-mise-a-jour-d-etat" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Callback avec mise à jour d'état</h2>
<p>Vous ne pouvez pas mettre à jour le State dans <code>self.handle</code> ; vous devez utiliser <code>self.send</code> à la place. Voir la section suivante.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/reason-react/docs/fr/render"><span class="arrow-prev">← </span><span>Précédent</span></a><a class="docs-next button" href="/reason-react/docs/fr/state-actions-reducer"><span>Suivant</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#callback-sans-mise-a-jour-d-etat">Callback sans mise à jour d'état</a><ul class="toc-headings"><li><a href="#sans-utiliser-self">Sans utiliser <code>self</code></a></li><li><a href="#utiliser-self">Utiliser <code>self</code></a></li></ul></li><li><a href="#callback-avec-mise-a-jour-d-etat">Callback avec mise à jour d'état</a></li></ul></nav></div><span><script src="/reason-react/js/redirectBlog.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '55156da6520de795d3a2c2d23786f08e',
                indexName: 'react-reason',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:fr"]}
              });
            </script></body></html>